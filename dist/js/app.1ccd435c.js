(function(t){function a(a){for(var s,n,i=a[0],c=a[1],m=a[2],l=0,d=[];l<i.length;l++)n=i[l],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&d.push(r[n][0]),r[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(a);while(d.length)d.shift()();return o.push.apply(o,m||[]),e()}function e(){for(var t,a=0;a<o.length;a++){for(var e=o[a],s=!0,n=1;n<e.length;n++){var c=e[n];0!==r[c]&&(s=!1)}s&&(o.splice(a--,1),t=i(i.s=e[0]))}return t}var s={},r={app:0},o=[];function n(t){return i.p+"js/"+({about:"about"}[t]||t)+"."+{about:"e5fe3fc4"}[t]+".js"}function i(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.e=function(t){var a=[],e=r[t];if(0!==e)if(e)a.push(e[2]);else{var s=new Promise((function(a,s){e=r[t]=[a,s]}));a.push(e[2]=s);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=n(t);var m=new Error;o=function(a){c.onerror=c.onload=null,clearTimeout(l);var e=r[t];if(0!==e){if(e){var s=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;m.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",m.name="ChunkLoadError",m.type=s,m.request=o,e[1](m)}r[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(a)},i.m=t,i.c=s,i.d=function(t,a,e){i.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,a){if(1&a&&(t=i(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)i.d(e,s,function(a){return t[a]}.bind(null,s));return e},i.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(a,"a",a),a},i.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},i.p="/",i.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],m=c.push.bind(c);c.push=a,c=c.slice();for(var l=0;l<c.length;l++)a(c[l]);var u=m;o.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"034f":function(t,a,e){"use strict";var s=e("64a9"),r=e.n(s);r.a},1:function(t,a){},"11df":function(t,a,e){},"223c":function(t,a,e){"use strict";var s=e("c973"),r=e.n(s);r.a},"22de":function(t,a,e){"use strict";var s=e("25be"),r=e.n(s);r.a},"23e2":function(t,a,e){},"25be":function(t,a,e){},"2c19":function(t,a,e){},"31d2":function(t,a,e){"use strict";var s=e("11df"),r=e.n(s);r.a},3714:function(t,a,e){"use strict";var s=e("e960"),r=e.n(s);r.a},"45ec":function(t,a,e){},"56d7":function(t,a,e){"use strict";e.r(a);e("cadf"),e("551c"),e("f751"),e("097d");var s=e("2b0e"),r=e("75fc"),o=(e("ac4d"),e("8a81"),e("ac6a"),e("2f62")),n=e("8c4f"),i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"home"},[e("entrance",{attrs:{msg:"213"}})],1)},c=[],m=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card container col-lg-4 col-md-6 col-sm-10 col-xl-4 mt-5 p-4"},[e("h1",{staticClass:"mb-4"},[t._v("Войдите в игру")]),e("form",{attrs:{action:""},on:{submit:function(t){t.preventDefault()}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"name"}},[t._v("Ваше имя")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],staticClass:"form-control form-control-lg",class:{"is-invalid":t.errorClass},attrs:{type:"text",name:"name",id:"name",placeholder:"Имя"},domProps:{value:t.name},on:{click:function(a){return t.clckForm()},input:function(a){a.target.composing||(t.name=a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}}),t.errorClass?e("div",{staticClass:"invalid-feedback"},[t._v("Обязательно введите имя!")]):t._e(),e("small",{staticClass:"form-text text-muted"},[t._v("Имя необходимо, чтобы другие игроки могли идентифицировать в чате и игре")])]),e("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{disabled:t.disabled},on:{click:function(a){return t.changePop()}}},[t._v("Войти")])])])},l=[],u=(e("7f7f"),{name:"Entrance",props:{msg:String},data:function(){return{formClicked:!1,name:"",wasClicked:!1}},mounted:function(){var t=this;this.name=this.$store.state.gamerName,this.wasClicked&&(this.formClicked=!0),setInterval((function(){""!=t.name&&(t.formClicked=!0)}),100),this.$store.commit("resetData")},computed:{gamerName:function(){return this.$store.state.gamerName},errorClass:function(){var t=""==this.name&&this.formClicked;return t},disabled:function(){return!this.formClicked||""==this.name&&this.formClicked}},methods:{changePop:function(){console.log(this.name),this.$socket.emit("setName",this.name),this.$store.commit("setName",this.name),this.$router.push("choose")},clckForm:function(){this.formClicked=!0,this.clickForm=!0}}}),d=u,g=e("2877"),f=Object(g["a"])(d,m,l,!1,null,"04bc8fe8",null),v=f.exports,h=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card container col-lg-4 col-md-5 col-sm-10 col-xs-8 mt-5 p-4"},[e("h1",{staticClass:"mb-1"},[t._v("Привет, "+t._s(t.gamerName)+"!")]),e("router-link",{attrs:{to:"/"}},[t._v("Сменить имя")]),e("p",[t._v("Выбери, как ты начнёшь игру")]),e("div",{staticClass:"btn-group btn-group-toggle mb-3"},[e("label",{staticClass:"btn btn-lg",class:{"btn-outline-info":"join"!=this.toggle,"btn-info":"join"==this.toggle}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.toggle,expression:"toggle"}],attrs:{type:"radio",value:"join",name:"toggle",id:"toggle1",autocomplete:"off"},domProps:{checked:t._q(t.toggle,"join")},on:{change:function(a){t.toggle="join"}}}),t._v(" Присоединиться к комнате\n    ")]),e("label",{staticClass:"btn btn-lg",class:{"btn-outline-info":"create"!=this.toggle,"btn-info":"create"==this.toggle},on:{click:function(a){return t.reset()}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.toggle,expression:"toggle"}],attrs:{type:"radio",value:"create",name:"toggle",id:"toggle2",autocomplete:"off"},domProps:{checked:t._q(t.toggle,"create")},on:{change:function(a){t.toggle="create"}}}),t._v("Создать комнату\n    ")])]),e("transition",{attrs:{name:"slideUp",mode:"out-in",appear:""}},["join"==t.toggle?e("div",{},[e("label",{attrs:{for:"name"}},[t._v("Номер комнаты")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.roomIdJoin,expression:"roomIdJoin",modifiers:{number:!0}}],staticClass:"form-control form-control-lg mb-3",attrs:{type:"number",min:"0",name:"roomIdJoin",id:"roomIdJoin",placeholder:"Введите номер комнаты"},domProps:{value:t.roomIdJoin},on:{keypress:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.joinGame()},input:function(a){a.target.composing||(t.roomIdJoin=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("button",{staticClass:"btn btn-lg btn-danger btn-block",on:{click:function(a){return t.joinGame()}}},[t._v("Присоединиться")])]):t._e(),"create"==t.toggle?e("div",{},[e("label",{attrs:{for:"name"}},[t._v("Количество месяцев")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.roomParams.month,expression:"roomParams.month",modifiers:{number:!0}}],staticClass:"form-control form-control-lg mb-3",attrs:{type:"number",min:"1",name:"month",id:"month",placeholder:"3"},domProps:{value:t.roomParams.month},on:{keypress:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.createGame()},input:function(a){a.target.composing||t.$set(t.roomParams,"month",t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("label",{attrs:{for:"name"}},[t._v("Начальный капитал")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.roomParams.money,expression:"roomParams.money",modifiers:{number:!0}}],staticClass:"form-control form-control-lg mb-3",attrs:{type:"number",min:"0",name:"money",id:"money",placeholder:"100000"},domProps:{value:t.roomParams.money},on:{keypress:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.createGame()},input:function(a){a.target.composing||t.$set(t.roomParams,"money",t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("button",{staticClass:"btn btn-lg btn-danger btn-block",on:{click:function(a){return t.createGame()}}},[t._v("Создать")])]):t._e()])],1)},C=[],p={name:"Choose",data:function(){return{toggle:"join",roomIdJoin:"",roomParams:{}}},computed:{gamerName:function(){return this.$store.state.gamerName},stateFirstParams:function(){return this.$store.state.firstRoomParams}},created:function(){},beforeMount:function(){},beforeRouteUpdate:function(t,a,e){},mounted:function(){},methods:{createGame:function(){this.$socket.emit("createRoom"),this.$router.push("main"),this.$store.state.isOwner=!0,this.$store.commit("copyData",this.roomParams)},joinGame:function(){this.$socket.emit("checkRoom",this.roomIdJoin),this.$socket.emit("setRoom",this.roomIdJoin),console.log("//"+this.roomIdJoin),this.$router.push("main")},reset:function(){this.$store.commit("resetData"),this.roomParams={},this.roomParams=Object.assign(this.stateFirstParams),console.log("RESET FROM BTN"),console.log(this.roomParams),console.log("FIRST PARAMS"),console.log(Object.assign(this.stateFirstParams))}},beforeRouteEnter:function(t,a,e){e((function(t){return""!=t.$store.state.gamerName||(e("/"),!0)}))}},P=p,_=(e("31d2"),Object(g["a"])(P,h,C,!1,null,null,null)),b=_.exports,w={name:"Home",components:{Entrance:v,Choose:b}},y=w,x=Object(g["a"])(y,i,c,!1,null,null,null),$=x.exports,k=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"splitScr"}},[e("div",{staticClass:"main-side",style:{display:t.isFinish?"flex":"unset"}},[e("div",{staticClass:"pg-header"},[e("h3",{staticClass:"ml-1 mb-0"},[t._v("Комната #"+t._s(t.roomNumber))]),e("router-link",{staticClass:"mb-2 ml-1 mr-2",attrs:{to:"choose"}},[t._v("Выйти из комнаты")])],1),e("transition",{attrs:{name:"fade",mode:"out-in"}},[t.isFinish?e("Finish"):e("PlayGround")],1)],1),e("Chat")],1)},S=[],E=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"sideBox",class:{chatOpened:t.chatOpened,chatClosed:!t.chatOpened}},[s("div",{staticClass:"chat-btn",class:{"bg-danger":t.chatOpened,"bg-info":!t.chatOpened},on:{click:function(a){return t.transformChat()}}},[s("transition",{attrs:{name:"fade"}},[t.chatOpened?t._e():s("img",{staticClass:"chat-btn-icon",attrs:{src:e("a5d7"),alt:""}}),t.chatOpened?s("img",{staticClass:"chat-btn-icon",attrs:{src:e("7ddb"),alt:""}}):t._e()]),t.messCountIsVoid||t.chatOpened?t._e():s("div",{staticClass:"chat-count"},[s("span",[t._v(t._s(t.unreadMessCount))])])],1),s("h2",{staticClass:"ml-2",attrs:{id:"chat"}},[t._v("Чат")]),s("div",{staticClass:"messageField",attrs:{id:"messageField"}},[s("div",{staticClass:"messageBox"},t._l(t.messages,(function(a,e){return s("div",{key:e,staticClass:"message",class:{adminBg:"Admin"==a.name}},[s("div",{staticClass:"avatar"}),s("div",{staticClass:"mess-block"},[s("div",{staticClass:"nickname",class:{adminMess:"Admin"==a.name}},[t._v(t._s(a.name))]),s("div",{staticClass:"messText"},[t._v(t._s(a.text))])])])})),0)]),s("SendBox")],1)])},O=[],M=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("form",{staticClass:"inputBox",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.sendMessage(a)}}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{name:"",rows:"2",placeholder:"Введите ваше сообщение..."},domProps:{value:t.message},on:{keydown:[function(a){if(!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter"))return null;a.preventDefault()},function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.sendMessage(a)}],input:function(a){a.target.composing||(t.message=a.target.value)}}}),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.sendMessage}},[t._v("Отправить")])])},j=[],T={name:"SendBox",data:function(){return{message:""}},watch:{message:function(t){t?this.$socket.emit("typing",this.username):this.$socket.emit("stopTyping")}},methods:{sendMessage:function(){""!==this.message&&(""===this.$store.state.gamerName&&(this.$store.state.gamerName="Anonim"),this.$socket.emit("newMessage",this.message),this.$store.commit("SOCKET_addMessage",{name:this.$store.state.gamerName,text:this.message}),this.message="")}}},N=T,D=(e("a243"),Object(g["a"])(N,M,j,!1,null,"6f20bf33",null)),R=D.exports,F={name:"Chat",data:function(){return{chatOpened:!1,unreadMessCount:0,readCount:0}},created:function(){var t=this;this.$store.watch((function(t,a){return t.messages}),(function(a,e){t.chatOpened?t.readCount=a.length:(console.log(a.length),t.unreadMessCount=a.length-t.readCount)}))},components:{SendBox:R},computed:{messages:function(){return setTimeout((function(){var t=document.querySelector("#messageField");null!==t&&(t.scrollTop=t.scrollHeight)}),10),this.$store.state.messages},messCountIsVoid:function(){return 0===this.unreadMessCount}},watch:{},methods:{transformChat:function(){this.chatOpened=!this.chatOpened,this.unreadMessCount=0,this.readCount=this.$store.state.messages.length}}},A=F,I=(e("f196"),Object(g["a"])(A,E,O,!1,null,null,null)),G=I.exports,K=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"playground"}},[e("div",{attrs:{id:"play-field"}},[e("div",{staticClass:"play-information",class:{dragstart:t.dragstart,dragover:t.dragover},on:{dragenter:function(a){return a.preventDefault(),t.dragov(a)},dragover:function(t){t.preventDefault()},drop:function(a){return a.preventDefault(),t.altdrop(a)},dragleave:t.dragleave}},[e("transition",{attrs:{name:"cardwrap"}},[t.isEvent&&!t.isStart?e("div",{staticClass:"event-box w-100 h-100"},[e("div",{staticClass:"container h-100"},[e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-12"},[e("h4",{staticClass:"text-center"},[t._v("\n                  Cобытие!\n                  "+t._s(t.event.title)+"\n                ")]),e("hr")])]),e("div",{staticClass:"row h-25"},[e("div",{staticClass:"col-12 h-100"},[e("div",{staticClass:"gray-block"})])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-8 mt-2 offset-2"},[e("p",{staticClass:"text-center"},[t._v(t._s(t.event.description))])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6 offset-3"},[e("button",{staticClass:"btn btn-primary w-100",staticStyle:{display:"block"},on:{click:t.closeEvent}},[t._v("Продолжить")])])])])]):t._e()]),t.isOwner&t.isStart?e("div",{staticClass:"owner-start-game d-flex align-content-between flex-wrap h-100"},[e("div",{staticClass:"container h-100"},[e("div",{staticClass:"row h-100 justify-content-center align-items-center"},[e("div",{staticClass:"col-12"},[e("h1",{staticClass:"text-center"},[t._v("Начать игру")]),t._m(0),e("div",{staticClass:"btn btn-primary btn-lg btn-block mt-3",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.startGame()}}},[t._v("Начать")])])])])]):t._e(),!t.isOwner&t.isStart?e("div",{staticClass:"owner-start-game d-flex align-content-between flex-wrap h-100"},[t._m(1)]):t._e(),t.isStart?t._e():e("div",{staticClass:"gamer-round-data container h-100"},[e("div",{staticClass:"row h-100 justify-content-center align-items-start d-flex"},[e("div",{staticClass:"col-12 data-wrap",staticStyle:{margin:"auto auto"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-5 d-flex align-content-center",staticStyle:{"vertical-align":"middle"}},[e("h4",{staticClass:"mb-0 d-block"},[t._v("Сейчас у вас ("+t._s(t.gamerName)+") есть:")])]),e("div",{staticClass:"col-7 data-group"},[e("ul",{staticClass:"list-group list-group-horizontal w-100"},[e("li",{staticClass:"list-group-item list-group-item-action active d-flex justify-content-between align-items-center col-6",staticStyle:{"border-right":"1px solid rgba(0, 0, 0, 0.125)","z-index":"20"}},[t._v("\n                  Бюджет\n                  "),e("span",{staticClass:"badge badge-primary badge-pill"},[e("h4",[e("number",{ref:"number1",staticClass:"bold transition",attrs:{animationPaused:"",to:t.gamerParams.money,duration:1.1,easing:"Power4.easeOut"},on:{click:t.playAnimation}}),t._v("\n                      ₽ ")],1)])]),e("li",{staticClass:"list-group-item list-group-item-action active d-flex justify-content-between align-items-center col-6"},[t._v("\n                  Месяц\n                  "),e("span",{staticClass:"badge badge-primary badge-pill"},[e("h4",[t._v(t._s(t.firstRoomParams.month-t.gamerParams.month+1)+" из\n                      "+t._s(t.firstRoomParams.month))])])])])])]),e("DataTable"),e("button",{staticClass:"btn btn-success w-100 mt-1 pr-2 btn-block",attrs:{disabled:t.isStart},on:{click:function(a){return t.makeStep()}}},[t._v("Завершить ход")])],1)])])],1)]),e("div",{staticStyle:{transition:"all 5s"},style:{overflowX:t.stepDone?"hidden":"scroll"},attrs:{id:"card-field"}},[e("transition",{attrs:{mode:"out-in",name:"fade",type:"transition"}},[t.stepDone?e("div",{staticClass:"dark-cover h-100 w-100",attrs:{draggable:"false"}},[e("div",{staticClass:"container h-100 w-100"},[e("div",{staticClass:"row h-100 justify-content-md-center align-content-center"},[e("div",{staticClass:"col-12"},[e("h2",{staticClass:"text-center"},[t._v("Вы сделали ход!")]),e("p",{staticClass:"text-center"},[e("small",[t._v("Ожидайте следующий")])])])])])]):t._e()]),e("transition-group",{attrs:{mode:"out-in",name:"cardwrap",id:"card-wrap",tag:"div",type:"transition"},on:{"before-enter":t.beforeEnter,enter:t.enter,leave:t.leave}},t._l(t.cards,(function(a,s){return t.isStart?t._e():e("div",{key:s,staticClass:"card-box",class:{"card-ml-0":a.oneOff,"card-ml-1":!a.oneOff&&!t.isLastEffectStage(a.id),"card-ml-2":!a.oneOff&&!t.hasThisEffect(a.id)},attrs:{draggable:a.cost<=t.gamerParams.money},on:{dragstart:function(a){return a.target!==a.currentTarget?null:t.altdragstart(a)},dragend:t.altdragend}},[a.oneOff||t.isLastEffectStage(a.id)?t._e():e("div",{staticClass:"card-box w-100 h-100 bottom-card bottom-card-1"}),a.oneOff||t.hasThisEffect(a.id)?t._e():e("div",{staticClass:"card-box w-100 h-100  bottom-card bottom-card-2"}),e("div",{staticClass:"card-head"},[e("h6",{staticClass:"card-title text-center pl-2 pr-2 mb-1"},[t._v(t._s(a.title))])]),e("div",{staticClass:"card-image"}),e("small",{staticClass:"card-text text-center"},[t._v(t._s(a.text))]),e("h3",{staticClass:"card-text text-center"},[t._v(t._s(a.cost)+" ₽")]),e("button",{staticClass:"btn btn-dark pl-2",attrs:{disabled:t.stepDone||a.cost>t.gamerParams.money},on:{click:function(a){return t.dropFromBtn(s)}}},[t._v("Использовать")])])})),0)],1),e("div",{attrs:{id:"enemy-field"}},[e("GamerList")],1),e("div",{attrs:{id:"effects-field"}},[e("Effects")],1)])},L=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("p",[t._v("\n                Если все игроки подключились к комнате, вы можете запустить\n                "),e("mark",[t._v("первый раунд")]),t._v(" в созданной вами комнате.\n              ")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container text-centre h-100"},[e("div",{staticClass:"row h-100 justify-content-center align-items-center"},[e("div",{staticClass:"col-11 text-center"},[e("h1",[t._v("Ожидайте начала игры")]),e("p",[t._v("\n                Когда все игроки подключатся к комнате, создатель комнаты запустит\n                "),e("mark",[t._v("первый раунд")]),t._v(" в созданной комнате.\n              ")])])])])}],z=(e("20d6"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"gamerlist"}},[t.isStart?t._e():e("ul",{staticClass:"list-group"},[t._m(0),t._l(t.gamers,(function(a,s){return e("li",{key:s,staticClass:"list-group-item d-flex justify-content-between align-items-center",class:{"list-group-item-primary":a.isattacker,"list-group-item-warning":!a.isattacker}},[t._v("\n      "+t._s(a.name)+"\n      "),a.isattacker?e("span",{staticClass:"badge badge-primary badge-pill"},[t._v("Сделал ход")]):e("span",{staticClass:"badge badge-warning badge-pill"},[t._v("Размышляет")])])}))],2)])}),W=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center active"},[e("h3",[t._v("Игроки")])])}],J={name:"gamerlist",data:function(){return{}},computed:{isStart:function(){return this.$store.state.isStart},gamers:function(){return this.$store.state.gamers}}},B=J,q=(e("3714"),Object(g["a"])(B,z,W,!1,null,null,null)),U=q.exports,H=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"effectslist"}},[t.isStart?t._e():e("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center active bg-info w-100",attrs:{id:"effects-head"}},[e("h6",[t._v("Длительные события")])]),t.isStart?t._e():e("ul",{staticClass:"list-group"},t._l(t.effects,(function(a,s){return e("li",{key:s,staticClass:"list-group-item d-flex justify-content-between align-items-center",class:{"list-group-item-info":s%2==1,"list-group-item-secondary text-body":s%2==0}},[t._v("\n      "+t._s(a.name)+"\n      "),e("span",{staticClass:"badge  badge-pill",class:{"badge-info":s%2==1,"badge-secondary":s%2==0}},[t._v("Шаг: "+t._s(a.step)+" из "+t._s(a.duration))])])})),0)])},V=[],X={name:"Effects",data:function(){return{}},computed:{isStart:function(){return this.$store.state.isStart},effects:function(){return this.$store.state.activeEffects}}},Y=X,Z=(e("223c"),Object(g["a"])(Y,H,V,!1,null,null,null)),Q=Z.exports,tt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("table",{staticClass:"table table-hover"},[t._m(0),e("tbody",[t._m(1),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("Органика")]),e("td",[t._v(t._s(t.gamerParams.organicCount)),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.organicCount>t.prevParams.organicCount,"arrow-down":t.gamerParams.organicCount<t.prevParams.organicCount}})]),e("td",[t._v(t._s((100*t.gamerParams.organicCoef).toFixed(2))),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.organicCoef>t.prevParams.organicCoef,"arrow-down":t.gamerParams.organicCoef<t.prevParams.organicCoef}})]),e("td",[t._v(t._s(Math.ceil(t.gamerParams.organicCount*t.gamerParams.organicCoef))),e("div",{staticClass:"arrow",class:{"arrow-up":Math.ceil(t.gamerParams.organicCount*t.gamerParams.organicCoef)>Math.ceil(t.prevParams.organicCount*t.prevParams.organicCoef),"arrow-down":Math.ceil(t.gamerParams.organicCount*t.gamerParams.organicCoef)<Math.ceil(t.prevParams.organicCount*t.prevParams.organicCoef)}})]),e("td",[t._v(t._s((100*t.gamerParams.conversion).toFixed(2))+" %"),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.conversion>t.prevParams.conversion,"arrow-down":t.gamerParams.conversion<t.prevParams.conversion}})]),e("td",[t._v(t._s(Math.ceil(t.gamerParams.organicCount*t.gamerParams.organicCoef*t.gamerParams.conversion))),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.organicCount*t.gamerParams.organicCoef*t.gamerParams.conversion>t.prevParams.organicCount*t.prevParams.organicCoef*t.prevParams.conversion,"arrow-down":t.gamerParams.organicCount*t.gamerParams.organicCoef*t.gamerParams.conversion<t.prevParams.organicCount*t.prevParams.organicCoef*t.prevParams.conversion}})]),e("td",[t._v(t._s(t._f("formatNumber")(t.gamerParams.averageCheck)))]),e("td",[t._v("\r\n              "+t._s(t._f("formatNumber")(Math.ceil(t.gamerParams.organicCount*t.gamerParams.organicCoef*t.gamerParams.conversion)*t.gamerParams.averageCheck))+"\r\n              ₽")])]),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("Реклама: контекст")]),e("td",[t._v(t._s(t.gamerParams.contextCount)),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.contextCount>t.prevParams.contextCount,"arrow-down":t.gamerParams.contextCount<t.prevParams.contextCount}})]),e("td",[t._v(t._s((100*t.gamerParams.contextCoef).toFixed(2))),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.contextCoef>t.prevParams.contextCoef,"arrow-down":t.gamerParams.contextCoef<t.prevParams.contextCoef}})]),e("td",[t._v(t._s(Math.ceil(t.gamerParams.contextCount*t.gamerParams.contextCoef))),e("div",{staticClass:"arrow",class:{"arrow-up":Math.ceil(t.gamerParams.contextCount*t.gamerParams.contextCoef)>Math.ceil(t.prevParams.contextCount*t.prevParams.contextCoef),"arrow-down":Math.ceil(t.gamerParams.contextCount*t.gamerParams.contextCoef)<Math.ceil(t.prevParams.contextCount*t.prevParams.contextCoef)}})]),e("td",[t._v(t._s((100*t.gamerParams.conversion).toFixed(2))+" %"),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.conversion>t.prevParams.conversion,"arrow-down":t.gamerParams.conversion<t.prevParams.conversion}})]),e("td",[t._v(t._s(Math.ceil(t.gamerParams.contextCount*t.gamerParams.contextCoef*t.gamerParams.conversion))),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.contextCount*t.gamerParams.contextCoef*t.gamerParams.conversion>t.prevParams.contextCount*t.prevParams.contextCoef*t.prevParams.conversion,"arrow-down":t.gamerParams.contextCount*t.gamerParams.contextCoef*t.gamerParams.conversion<t.prevParams.contextCount*t.prevParams.contextCoef*t.prevParams.conversion}})]),e("td"),e("td",[t._v("\r\n              "+t._s(t._f("formatNumber")(Math.ceil(t.gamerParams.contextCount*t.gamerParams.contextCoef*t.gamerParams.conversion)*t.gamerParams.averageCheck))+"\r\n              ₽")])]),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("Реклама: соцсети")]),e("td",[t._v(t._s(t.gamerParams.socialsCount)),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.socialsCount>t.prevParams.socialsCount,"arrow-down":t.gamerParams.socialsCount<t.prevParams.socialsCount}})]),e("td",[t._v(t._s((100*t.gamerParams.socialsCoef).toFixed(2))),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.socialsCoef>t.prevParams.socialsCoef,"arrow-down":t.gamerParams.socialsCoef<t.prevParams.socialsCoef}})]),e("td",[t._v(t._s(Math.ceil(t.gamerParams.socialsCoef*t.gamerParams.socialsCount))),e("div",{staticClass:"arrow",class:{"arrow-up":Math.ceil(t.gamerParams.socialsCount*t.gamerParams.socialsCoef)>Math.ceil(t.prevParams.socialsCount*t.prevParams.socialsCoef),"arrow-down":Math.ceil(t.gamerParams.socialsCount*t.gamerParams.socialsCoef)<Math.ceil(t.prevParams.socialsCount*t.prevParams.socialsCoef)}})]),e("td",[t._v(t._s((100*t.gamerParams.conversion).toFixed(2))+" %"),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.conversion>t.prevParams.conversion,"arrow-down":t.gamerParams.conversion<t.prevParams.conversion}})]),e("td",[t._v(t._s(Math.ceil(t.gamerParams.socialsCount*t.gamerParams.socialsCoef*t.gamerParams.conversion))),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.socialsCount*t.gamerParams.socialsCoef*t.gamerParams.conversion>t.prevParams.socialsCount*t.prevParams.socialsCoef*t.prevParams.conversion,"arrow-down":t.gamerParams.socialsCount*t.gamerParams.socialsCoef*t.gamerParams.conversion<t.prevParams.socialsCount*t.prevParams.socialsCoef*t.prevParams.conversion}})]),e("td"),e("td",[t._v("\r\n              "+t._s(t._f("formatNumber")(Math.ceil(t.gamerParams.socialsCount*t.gamerParams.socialsCoef*t.gamerParams.conversion)*t.gamerParams.averageCheck))+"\r\n              ₽")])]),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("Соц. медиа")]),e("td",[t._v(t._s(t.gamerParams.smmCount)),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.smmCount>t.prevParams.smmCount,"arrow-down":t.gamerParams.smmCount<t.prevParams.smmCount}})]),e("td",[t._v(t._s((100*t.gamerParams.smmCoef).toFixed(2))),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.smmCoef>t.prevParams.smmCoef,"arrow-down":t.gamerParams.smmCoef<t.prevParams.smmCoef}})]),e("td",[t._v(t._s(Math.ceil(t.gamerParams.smmCoef*t.gamerParams.smmCount))),e("div",{staticClass:"arrow",class:{"arrow-up":Math.ceil(t.gamerParams.smmCount*t.gamerParams.smmCoef)>Math.ceil(t.prevParams.smmCount*t.prevParams.smmCoef),"arrow-down":Math.ceil(t.gamerParams.smmCount*t.gamerParams.smmCoef)<Math.ceil(t.prevParams.smmCount*t.prevParams.smmCoef)}})]),e("td",[t._v(t._s((100*t.gamerParams.conversion).toFixed(2))+" %"),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.conversion>t.prevParams.conversion,"arrow-down":t.gamerParams.conversion<t.prevParams.conversion}})]),e("td",[t._v(t._s(Math.ceil(t.gamerParams.smmCount*t.gamerParams.smmCoef*t.gamerParams.conversion))),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.smmCount*t.gamerParams.smmCoef*t.gamerParams.conversion>t.prevParams.smmCount*t.prevParams.smmCoef*t.prevParams.conversion,"arrow-down":t.gamerParams.smmCount*t.gamerParams.smmCoef*t.gamerParams.conversion<t.prevParams.smmCount*t.prevParams.smmCoef*t.prevParams.conversion}})]),e("td"),e("td",[t._v("\r\n              "+t._s(t._f("formatNumber")(Math.ceil(t.gamerParams.smmCount*t.gamerParams.smmCoef*t.gamerParams.conversion)*t.gamerParams.averageCheck))+"\r\n              ₽")])]),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("Прямой заход")]),e("td",[t._v(t._s(t.gamerParams.straightCount)),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.straightCount>t.prevParams.straightCount,"arrow-down":t.gamerParams.straightCount<t.prevParams.straightCount}})]),e("td",[t._v(t._s((100*t.gamerParams.straightCoef).toFixed(2))),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.straightCoef>t.prevParams.straightCoef,"arrow-down":t.gamerParams.straightCoef<t.prevParams.straightCoef}})]),e("td",[t._v(t._s(Math.ceil(t.gamerParams.straightCoef*t.gamerParams.straightCount))),e("div",{staticClass:"arrow",class:{"arrow-up":Math.ceil(t.gamerParams.straightCount*t.gamerParams.straightCoef)>Math.ceil(t.prevParams.straightCount*t.prevParams.straightCoef),"arrow-down":Math.ceil(t.gamerParams.straightCount*t.gamerParams.straightCoef)<Math.ceil(t.prevParams.straightCount*t.prevParams.straightCoef)}})]),e("td",[t._v(t._s((100*t.gamerParams.conversion).toFixed(2))+" %"),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.conversion>t.prevParams.conversion,"arrow-down":t.gamerParams.conversion<t.prevParams.conversion}})]),e("td",[t._v(t._s(Math.ceil(t.gamerParams.straightCount*t.gamerParams.straightCoef*t.gamerParams.conversion))),e("div",{staticClass:"arrow",class:{"arrow-up":t.gamerParams.straightCount*t.gamerParams.straightCoef*t.gamerParams.conversion>t.prevParams.straightCount*t.prevParams.straightCoef*t.prevParams.conversion,"arrow-down":t.gamerParams.straightCount*t.gamerParams.straightCoef*t.gamerParams.conversion<t.prevParams.straightCount*t.prevParams.straightCoef*t.prevParams.conversion}})]),e("td"),e("td",[t._v("\r\n              "+t._s(t._f("formatNumber")(Math.ceil(t.gamerParams.straightCount*t.gamerParams.straightCoef*t.gamerParams.conversion)*t.gamerParams.averageCheck))+"\r\n              ₽")])]),e("tr",[e("th",{attrs:{scope:"row"}},[t._v("ИТОГО")]),e("td",[t._v("\r\n              "+t._s(t.gamerParams.organicCount+t.gamerParams.contextCount+t.gamerParams.socialsCount+t.gamerParams.smmCount+t.gamerParams.straightCount)+"\r\n            ")]),e("td"),e("td",[t._v("\r\n              "+t._s(Math.ceil(t.gamerParams.organicCoef*t.gamerParams.organicCount)+Math.ceil(t.gamerParams.contextCoef*t.gamerParams.contextCount)+Math.ceil(t.gamerParams.socialsCoef*t.gamerParams.socialsCount)+Math.ceil(t.gamerParams.smmCoef*t.gamerParams.smmCount)+Math.ceil(t.gamerParams.straightCoef*t.gamerParams.straightCount))+"\r\n            ")]),e("td"),e("td",[t._v("\r\n              "+t._s(Math.ceil(t.gamerParams.organicCount*t.gamerParams.organicCoef*t.gamerParams.conversion)+Math.ceil(t.gamerParams.contextCount*t.gamerParams.contextCoef*t.gamerParams.conversion)+Math.ceil(t.gamerParams.socialsCount*t.gamerParams.socialsCoef*t.gamerParams.conversion)+Math.ceil(t.gamerParams.smmCount*t.gamerParams.smmCoef*t.gamerParams.conversion)+Math.ceil(t.gamerParams.straightCount*t.gamerParams.straightCoef*t.gamerParams.conversion))+"\r\n            ")]),e("td"),e("td",{staticClass:"font-weight-bold"},[t._v("\r\n              "+t._s(t._f("formatNumber")((Math.ceil(t.gamerParams.organicCount*t.gamerParams.organicCoef*t.gamerParams.conversion)+Math.ceil(t.gamerParams.contextCount*t.gamerParams.contextCoef*t.gamerParams.conversion)+Math.ceil(t.gamerParams.socialsCount*t.gamerParams.socialsCoef*t.gamerParams.conversion)+Math.ceil(t.gamerParams.smmCount*t.gamerParams.smmCoef*t.gamerParams.conversion)+Math.ceil(t.gamerParams.straightCount*t.gamerParams.straightCoef*t.gamerParams.conversion))*t.gamerParams.averageCheck))+"\r\n              ₽")])])])])},at=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}}),e("th",{staticClass:"font-weight-normal",attrs:{scope:"col"}},[t._v("ТРАФИК")]),e("th",{staticClass:"font-weight-normal",attrs:{scope:"col",colspan:"2"}},[t._v("ЗВОНКИ")]),e("th",{staticClass:"font-weight-normal",attrs:{scope:"col",colspan:"2"}},[t._v("КЛИЕНТЫ")]),e("th",{staticClass:"font-weight-normal",attrs:{scope:"col"}},[t._v("СРЕДНИЙ ЧЕК")]),e("th",{staticClass:"font-weight-normal",attrs:{scope:"col"}},[t._v("ВЫРУЧКА")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("tr",[e("th",{attrs:{scope:"row"}}),e("td"),e("td",{staticClass:"font-weight-light"},[t._v("Конверсия, %")]),e("td",{staticClass:"font-weight-light"},[t._v("Кол-во, шт")]),e("td",{staticClass:"font-weight-light"},[t._v("Конверсия, %")]),e("td",{staticClass:"font-weight-light"},[t._v("Кол-во, чел")]),e("td"),e("td")])}],et=e("6612"),st=e.n(et);s["a"].filter("formatNumber",(function(t){return st()(t).format("0,0")}));var rt={name:"DataTable",data:function(){return{}},computed:{gamerParams:function(){return this.$store.state.roomParams},prevParams:function(){return this.$store.state.prevRoomParams}}},ot=rt,nt=(e("6224"),Object(g["a"])(ot,tt,at,!1,null,null,null)),it=nt.exports,ct={name:"PlayGround",components:{GamerList:U,Effects:Q,DataTable:it},created:function(){this.cards=this.shuffle(this.cards),this.refreshCards=Object(r["a"])(this.cards),this.$store.commit("doAnimation")},data:function(){return{usedCards:[],clientsRendered:!0,dragstart:!1,dragover:!1,dragnode:void 0,params:{},refreshCards:[],cards:[{id:1,title:"Нанять SMM-менеджера",text:"Описание карточки, описание карточки",cost:55e3},{id:2,title:"Заказать SEO-оптимизацию",text:"Описание карточки, описание карточки",cost:5e4},{id:3,title:"Улучшение юзабилити",text:"Описание карточки, описание карточки",cost:2e4,oneOff:!0},{id:4,title:"Реклама в соцсетях",text:"Описание карточки, описание карточки",cost:25e3},{id:5,title:"PR-компания компании",text:"Описание карточки, описание карточки",cost:3e4},{id:6,title:"Контекстная рекламная компания",text:"Описание карточки, описание карточки",cost:35e3},{id:7,title:"Размещение информации в справочниках",text:"Описание карточки, описание карточки",cost:2e4,oneOff:!0}],number:0,tweenedNumber:0}},mounted:function(){this.number=this.$store.state.roomParams.money,this.$store.commit("doAnimation")},watch:{number:function(t){TweenLite.to(this.$data,1,{tweenedNumber:t})},money:function(t){var a=this;setTimeout((function(){a.playAnimation()}),50)}},computed:{clients:function(){return this.$store.state.roomParams.clients},money:function(){return this.$store.state.roomParams.money},isEvent:function(){var t=this.$store.state.gameEvent;for(var a in t)return!0;return!1},event:function(){return this.$store.state.gameEvent},isOwner:function(){return this.$store.state.isOwner},isStart:function(){return this.$store.state.isStart},gamerName:function(){return this.$store.state.gamerName},gamerParams:function(){this.$store.state.roomParams;return this.$store.state.roomParams},firstRoomParams:function(){return this.$store.state.firstRoomParams},stepDone:function(){var t=document.querySelector("#card-field");return null!==t&&t.scrollTo(0,0),this.$store.state.stepDone},effects:function(){return this.$store.state.activeEffects}},methods:{playAnimation:function(){var t=this;void 0!==this.$refs.number1&&(this.$refs.number1.play(),setTimeout((function(){t.$refs.number1.play()}),100)),this.$store.commit("doAnimation")},isLastEffectStage:function(t){var a=this.effects.findIndex((function(a){return a.id===t}));if(-1!==a){var e=this.effects[a];return e.step+1===e.duration}return!1},hasThisEffect:function(t){return-1!==this.effects.findIndex((function(a){return a.id===t}))},closeEvent:function(){this.$store.commit("SOCKET_setGameEvent",{})},shuffle:function(t){var a,e,s=t.length;while(s>0)e=Math.floor(Math.random()*s),s--,a=t[s],t[s]=t[e],t[e]=a;return t},makeStep:function(){var t=this;this.$store.commit("doStep"),this.$socket.emit("doStep",this.usedCards);for(var a=[3,7],e=function(){var a=o[s],e=t.usedCards.findIndex((function(t){return t===a}));if(console.log("ОДНОРАЗОВЫЕ КАРТОЧКИ"),-1!==e){var r=t.refreshCards.findIndex((function(t){return t.id===a}));t.refreshCards.splice(r,1)}},s=0,o=a;s<o.length;s++)e();this.usedCards=[],console.log(this.refreshCards),this.cards=Object(r["a"])(this.refreshCards),console.log(this.cards),console.log("-----Index of cards------"),console.log(this.usedCards)},dropFromBtn:function(t){this.usedCards.push(this.cards[t].id);var a=-this.cards[t].cost;this.$store.commit("changeMoney",a),this.cards.splice(t,1),this.playAnimation()},startGame:function(){console.log("Стейт комнаты");var t=Object.assign(this.$store.state.roomParams);console.log(t),console.log("/"),console.log("/"),console.log("/"),console.log("/"),console.log("DO ZASADY"),console.log("*"),console.log(this.cards),console.log(this.refreshCards),this.$socket.emit("startGame",t),this.$store.commit("SOCKET_calcAllParams"),this.$store.state.isOwner=!1,this.$store.state.isStart=!1,this.playAnimation()},beforeEnter:function(t){console.log("befenterhook")},enter:function(t){this.playAnimation(),console.log("enterhook")},leave:function(t){t.style.opacity=0,t.style.height=0,console.log("leavehook"),this.$store.commit("doAnimation")},altdrop:function(t){if(t.preventDefault(),console.log("drop"),this.dragovered=!1,this.dragstart=!1,"undefined"!=typeof this.dragnode&&"card-wrap"==this.dragnode.parentNode.id){var a=0,e=!0,s=!1,r=void 0;try{for(var o,n=this.dragnode.parentNode.childNodes[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var i=o.value;if(i==this.dragnode)break;a++}}catch(m){s=!0,r=m}finally{try{e||null==n.return||n.return()}finally{if(s)throw r}}var c=-this.cards[a].cost;this.$store.commit("changeMoney",c),this.cards.splice(a,1)}this.dragnode=void 0,this.playAnimation()},altdragstart:function(t){t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="move",t.dataTransfer.setData("text/plain",null),t.target.style.opacity=.5,t.target.style.transform="scale(0.8)",this.dragstart=!0,this.dragnode=t.target},altdragend:function(t){t.target.style.opacity="",t.target.style.transform="",this.dragnode=void 0,this.dragover=!1,this.dragstart=!1},dragov:function(t){console.log("over"),t.dataTransfer.dropEffect="move",this.dragover=!0},dragleave:function(t){console.log("leave"),this.dragover=!1}}},mt=ct,lt=(e("8c4c"),Object(g["a"])(mt,K,L,!1,null,null,null)),ut=lt.exports,dt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"finish-screen"}},[e("div",{staticClass:"container mt-4"},[t.isLoozer?e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("h2",{staticClass:"text-center h-100"},[t._v("Увы, "+t._s(t.gamerName)+", следующий раз должно получиться!")])])]):t._e(),t.isLoozer?e("hr",{staticStyle:{margin:"0"}}):t._e(),t.isLoozer?e("div",{staticClass:"row"},[t._m(0)]):t._e(),t.isLoozer?e("div",{staticClass:"row"},[e("div",{staticClass:"col-6 offset-3"},[e("div",{staticClass:"card mb-3",staticStyle:{"max-width":"540px"}},[e("div",{staticClass:"row no-gutters"},[t._m(1),e("div",{staticClass:"col-md-9"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("\n                  Первое место -\n                  "),e("strong",[t._v(t._s(void 0!==t.firstPosition?t.firstPosition.name:""))])]),e("p",{staticClass:"card-text"},[t._v("\n                  Игроку удалось заработать\n                  "),e("br"),e("em",[t._v(t._s(void 0!==t.firstPosition?t.firstPosition.money:"")+" ₽")])])])])])])])]):t._e(),t.isSomeWinner?e("div",{staticClass:"row"},[t._m(2),t.isWinner?e("div",{staticClass:"col-8 text-center mt-3"},[e("h3",[t._v("Поздравляю, "+t._s(void 0!==t.gamerData?t.gamerData.name:"")+"!")]),e("h1",[t._v("Вы - победитель")]),e("p",[t._v("Вам удалось заработать:")]),e("ul",{staticClass:"list-group col-10 offset-1 mt-3"},[e("li",{staticClass:"list-group-item list-group-item-action list-group-item-action-success active d-flex justify-content-between align-items-center"},[t._v("\n            Общий бюджет\n            "),e("span",{staticClass:"badge badge-primary badge-pill"},[e("h4",[t._v(t._s(void 0!==t.gamerData?t.gamerData.money:"")+" ₽")])])]),e("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[t._v("\n            Клиентов в месяц:\n            "),e("span",{staticClass:"badge badge-primary badge-pill"},[t._v(t._s(t.gamerRoomParams.clients))])])])]):t.isPrizer?e("div",{staticClass:"col-8 text-center mt-3"},[e("h3",[t._v("Поздравляю, "+t._s(t.gamerData.name)+"!")]),e("h1",[t._v("Вы на "+t._s(t.isSecondWinner?"втором":"третьем")+" месте")]),e("p",[t._v("Вам удалось заработать:")]),e("ul",{staticClass:"list-group col-10 offset-1 mt-3"},[e("li",{staticClass:"list-group-item list-group-item-action list-group-item-action-success active d-flex justify-content-between align-items-center"},[t._v("\n            Общий бюджет\n            "),e("span",{staticClass:"badge badge-primary badge-pill"},[e("h4",[t._v(t._s(void 0!==t.gamerData?t.gamerData.money:"")+" ₽")])])]),e("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[t._v("\n            Клиентов в месяц:\n            "),e("span",{staticClass:"badge badge-primary badge-pill"},[t._v(t._s(t.gamerRoomParams.clients))])])])]):t._e()]):t._e(),e("div",{staticClass:"row mt-2"},[t.isSecondPosition?e("div",{staticClass:"col-6"},[e("div",{staticClass:"card mb-3",staticStyle:{"max-width":"540px"}},[e("div",{staticClass:"row no-gutters"},[t._m(3),e("div",{staticClass:"col-md-9"},[e("div",{staticClass:"card-body"},[t.isWinner||t.isLoozer?e("h5",{staticClass:"card-title"},[t._v("\n                  Второе место -\n                  "),e("strong",[t._v(t._s(void 0!==t.secondPosition?t.secondPosition.name:""))])]):t._e(),t.isPrizer?e("h5",{staticClass:"card-title"},[t._v("\n                  Первое место -\n                  "),e("strong",[t._v(t._s(void 0!==t.secondPosition?t.secondPosition.name:""))])]):t._e(),e("p",{staticClass:"card-text"},[t._v("\n                  Игроку удалось заработать\n                  "),e("br"),e("em",[t._v(t._s(void 0!==t.secondPosition?t.secondPosition.money:"")+" ₽")])])])])])])]):t._e(),t.isThirdPosition?e("div",{staticClass:"col-6"},[e("div",{staticClass:"card mb-3",staticStyle:{"max-width":"540px"}},[e("div",{staticClass:"row no-gutters"},[t._m(4),e("div",{staticClass:"col-md-9"},[e("div",{staticClass:"card-body"},[t.isWinner||t.isSecondWinner||t.isLoozer?e("h5",{staticClass:"card-title"},[t._v("\n                  Третье место -\n                  "),e("strong",[t._v(t._s(void 0!=t.thirdPosition?t.thirdPosition.name:""))])]):t._e(),t.isThirdWinner?e("h5",{staticClass:"card-title"},[t._v("\n                  Второе место -\n                  "),e("strong",[t._v(t._s(void 0!=t.thirdPosition?t.thirdPosition.name:""))])]):t._e(),e("p",{staticClass:"card-text"},[t._v("\n                  Игроку удалось заработать\n                  "),e("br"),e("em",[t._v(t._s(void 0!==t.thirdPosition?t.thirdPosition.money:"")+" ₽")])])])])])])]):t._e()]),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-6 align-content-center justify-content-between"},[e("router-link",{staticClass:"btn btn-info w-100",staticStyle:{margin:"auto auto",display:"block"},attrs:{to:"Choose",tag:"button"}},[t._v("Cоздать новую комнату")])],1),t._m(5)])])])},gt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-12"},[e("h4",{staticClass:"text-center h-100 mt-2 mb-3"},[t._v("Результаты других игроков:")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"gray-block"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-4"},[e("div",{staticClass:"gray-block"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"gray-block"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"gray-block"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-secondary w-100",staticStyle:{margin:"auto auto",display:"block"},attrs:{disabled:""}},[t._v("\n          Играть ещё раз в\n          комнате\n        ")])])}],ft={name:"Finish",methods:{},computed:{gamerRoomParams:function(){return this.$store.state.roomParams},gamerName:function(){return this.$store.state.gamerName},isSecondPosition:function(){return!!this.$store.state.winners.hasOwnProperty("2")},isThirdPosition:function(){return!!this.$store.state.winners.hasOwnProperty("3")},isWinner:function(){return this.$socket.id===this.$store.state.winners[1].id},isSecondWinner:function(){return this.$socket.id===this.$store.state.winners[2].id},isThirdWinner:function(){return this.$socket.id===this.$store.state.winners[3].id},isPrizer:function(){return void 0!==this.$store.state.winners[2]&&void 0==this.$store.state.winners[3]?this.$socket.id===this.$store.state.winners[2].id:void 0!==this.$store.state.winners[2]&&void 0!==this.$store.state.winners[3]?this.$socket.id===this.$store.state.winners[2].id||this.$socket.id===this.$store.state.winners[3].id:void 0},isLoozer:function(){return!(this.$socket.id===this.$store.state.winners[1].id||this.$socket.id===this.$store.state.winners[2].id||this.$socket.id===this.$store.state.winners[3].id)},isSomeWinner:function(){return this.$socket.id===this.$store.state.winners[1].id||this.$socket.id===this.$store.state.winners[2].id||this.$socket.id===this.$store.state.winners[3].id},gamerData:function(){return this.isWinner?this.$store.state.winners[1]:this.$socket.id===this.$store.state.winners[2].id?this.$store.state.winners[2]:this.$socket.id===this.$store.state.winners[3].id?this.$store.state.winners[3]:void 0},firstPosition:function(){return this.$store.state.winners[1]},secondPosition:function(){return!!this.$store.state.winners.hasOwnProperty("2")&&(this.isWinner||this.isLoozer?this.$store.state.winners[2]:this.$socket.id===this.$store.state.winners[2].id||this.$socket.id===this.$store.state.winners[3].id?this.$store.state.winners[1]:void 0)},thirdPosition:function(){return!!this.$store.state.winners.hasOwnProperty("3")&&(this.isWinner||this.$socket.id===this.$store.state.winners[2].id||this.isLoozer?this.$store.state.winners[3]:this.$socket.id===this.$store.state.winners[3].id?this.$store.state.winners[2]:void 0)}}},vt=ft,ht=(e("e6ee"),Object(g["a"])(vt,dt,gt,!1,null,null,null)),Ct=ht.exports;e("f9e3");var pt={name:"Main",data:function(){return{}},components:{Chat:G,PlayGround:ut,Finish:Ct},methods:{leaveRoom:function(){console.log("Ушёл из комнаты!"),this.$socket.emit("leaveRoom"),this.$store.state.messages=[],this.$store.state.isStart=!0,this.$store.state.isOwner=!1,this.$store.state.isFinish=!1,this.$store.commit("SOCKET_doNextStep"),this.$store.commit("resetData")}},beforeRouteEnter:function(t,a,e){e((function(t){console.log(t.$store.state.roomId);setTimeout((function(){if(-1!=t.$store.state.roomId)return!0;e("/choose 1")}),2e3)}))},beforeRouteLeave:function(t,a,e){this.leaveRoom(),e()},computed:{roomNumber:function(){return this.$store.state.roomId},connections:function(){return this.$store.state.connections},isFinish:function(){return this.$store.state.isFinish}}},Pt=pt,_t=(e("22de"),Object(g["a"])(Pt,k,S,!1,null,null,null)),bt=_t.exports;s["a"].use(n["a"]);var wt=new n["a"]({mode:"history",base:"/",routes:[{path:"/",name:"Home",component:$},{path:"/choose",name:"Choose",component:b},{path:"/main",name:"Main",component:bt},{path:"/about",name:"about",component:function(){return e.e("about").then(e.bind(null,"f820"))}},{path:"/*",redirect:{name:"Home"}}]});s["a"].use(o["a"]);var yt=new o["a"].Store({state:{gamerName:"",socketId:"",isOwner:!1,isStart:!0,isFinish:!1,stepDone:!1,havePrevData:!1,roomId:-1,prevRoomParams:{},roomParams:{},firstRoomParams:{first:!0,preset:!0,month:3,money:15e4,organicCount:7500,contextCount:9500,socialsCount:1500,smmCount:1200,straightCount:300,organicCoef:.1,contextCoef:.07,socialsCoef:.25,smmCoef:.05,straightCoef:.1,conversion:.3,averageCheck:6500,realCostAttract:2500,marginalCost:800},connections:[],messages:[],gamers:[],winners:{},activeEffects:[],gameEvent:null},getters:{},mutations:{resetData:function(t){for(var a in console.log("RESET!"),t.connections=[],t.messages=[],t.gamers=[],t.winners={},t.activeEffects=[],t.gameEvent=null,t.isOwner=!1,t.isStart=!0,t.isFinish=!1,t.stepDone=!1,t.roomId=-1,t.havePrevData=!1,t.roomParams={},t.prevRoomParams={},t.firstRoomParams)t.roomParams[a]=t.firstRoomParams[a]},copyData:function(t,a){for(var e in t.roomParams={},a)t.roomParams[e]=a[e]},doAnimation:function(t,a){t.roomParams.money++,t.roomParams.money--},setName:function(t,a){t.gamerName=a},setOwner:function(t){t.isOwner=!0},setRoomParams:function(t,a){var e=a.month;t.roomParams.month=e},doStep:function(t){t.stepDone=!0},changeMoney:function(t,a){void 0!==t.roomParams.money&&(t.roomParams.money+=a)},SOCKET_roomNotFound:function(){wt.push("/choose")},SOCKET_doNextStep:function(t){t.stepDone=!1;var a=!0,e=!1,s=void 0;try{for(var r,o=t.gamers[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var n=r.value;n.isattacker=!1}}catch(i){e=!0,s=i}finally{try{a||null==o.return||o.return()}finally{if(e)throw s}}},SOCKET_setRoomNumber:function(t,a){t.roomId=a},SOCKET_addMessage:function(t,a){t.messages.push(a);var e=document.querySelector("#messageField");null!==e&&(e.scrollTop=e.scrollHeight)},SOCKET_setStartGame:function(t,a){for(var e in t.roomParams)t.prevRoomParams[e]=t.roomParams[e];console.log("~~~~~~~PREV~~~~~~"),console.log(t.prevRoomParams),t.isStart=!1,t.roomParams=a,console.log("Тут"),console.log(t.roomParams);var s=(t.roomParams.organicCount*t.roomParams.organicCoef+t.roomParams.contextCount*t.roomParams.contextCoef+t.roomParams.socialsCount*t.roomParams.socialsCoef+t.roomParams.smmCount*t.roomParams.smmCoef+t.roomParams.straightCount*t.roomParams.straightCoef)*t.roomParams.conversion;t.roomParams.clients=Math.ceil(s),console.log("Клиенты: "+s);var r=s*t.roomParams.averageCheck;t.roomParams.commCircul=r,console.log("commCircul: "+r);var o=Math.ceil(s*t.roomParams.realCostAttract);t.roomParams.expenses=o,console.log("expenses: "+o);var n=r-o;console.log("result: "+n);var i=n/s;t.roomParams.moneyPerClient=Math.ceil(i),t.roomParams=a},SOCKET_setGamers:function(t,a){t.gamers=Object(r["a"])(a.gamers),t.prevRoomParams={}},SOCKET_changeGamerStatus:function(t,a){var e=!0,s=!1,r=void 0;try{for(var o,n=t.gamers[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var i=o.value;if(i.id==a){i.isattacker=!0;break}}}catch(c){s=!0,r=c}finally{try{e||null==n.return||n.return()}finally{if(s)throw r}}},SOCKET_finish:function(t,a){t.isFinish=!0,t.winners=Object.assign(a)},SOCKET_setGameEvent:function(t,a){t.gameEvent={},t.gameEvent=Object.assign(a)},SOCKET_calcAllParams:function(t){var a=(t.roomParams.organicCount*t.roomParams.organicCoef+t.roomParams.contextCount*t.roomParams.contextCoef+t.roomParams.socialsCount*t.roomParams.socialsCoef+t.roomParams.smmCount*t.roomParams.smmCoef+t.roomParams.straightCount*t.roomParams.straightCoef)*t.roomParams.conversion;t.roomParams.clients=a,console.log("Клиенты: "+a);var e=a*t.roomParams.averageCheck;t.roomParams.commCircul=e,console.log("commCircul: "+e);var s=a*t.roomParams.realCostAttract;t.roomParams.expenses=s,console.log("expenses: "+s);var r=e-s;console.log("result: "+r);var o=r/a;t.roomParams.moneyPerClient=o},SOCKET_setEffects:function(t,a){t.activeEffects=Object(r["a"])(a)}},actions:{SOCKET_gameEvent:function(t,a){console.log(a),t.commit("SOCKET_setGameEvent",a),setTimeout((function(){t.commit("SOCKET_setGameEvent",{})}),7e3)}}}),xt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("div",{attrs:{id:"nav"}},[e("router-link",{attrs:{to:"/"}},[t._v("Вход")]),t._v("|\n    "),e("router-link",{attrs:{to:"/choose"}},[t._v("Создать игру")]),t._v("|\n    "),e("router-link",{attrs:{to:"/main"}},[t._v("Главный экран")]),t._v("|\n    "),e("router-link",{attrs:{to:"/about"}},[t._v("Об игре")])],1),e("div",{attrs:{id:"view"}},[e("transition",{attrs:{name:"slide",mode:"out-in",appear:""}},[e("router-view")],1)],1)])},$t=[],kt=(e("8055"),{data:function(){return{user:"",message:"",messages:[]}},sockets:{connect:function(t){console.log("Socket connected")}},computed:{},methods:{}}),St=kt,Et=(e("034f"),Object(g["a"])(St,xt,$t,!1,null,null,null)),Ot=Et.exports,Mt=e("5132"),jt=e.n(Mt),Tt=e("9001");s["a"].config.productionTip=!1,s["a"].use(new jt.a({debug:!0,connection:"https://marketing-game.herokuapp.com/",vuex:{store:yt,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),s["a"].use(Tt["a"]),new s["a"]({router:wt,store:yt,render:function(t){return t(Ot)}}).$mount("#app")},6224:function(t,a,e){"use strict";var s=e("2c19"),r=e.n(s);r.a},"64a9":function(t,a,e){},"7ddb":function(t,a,e){t.exports=e.p+"img/close-icon.4bfa4d50.svg"},8817:function(t,a,e){},"89ac":function(t,a,e){},"8c4c":function(t,a,e){"use strict";var s=e("89ac"),r=e.n(s);r.a},a243:function(t,a,e){"use strict";var s=e("8817"),r=e.n(s);r.a},a5d7:function(t,a,e){t.exports=e.p+"img/chat-icon.a82272c0.svg"},c973:function(t,a,e){},e6ee:function(t,a,e){"use strict";var s=e("45ec"),r=e.n(s);r.a},e960:function(t,a,e){},f196:function(t,a,e){"use strict";var s=e("23e2"),r=e.n(s);r.a}});
//# sourceMappingURL=app.1ccd435c.js.map