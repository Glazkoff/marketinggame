(function(t){function e(e){for(var o,s,i=e[0],l=e[1],c=e[2],m=0,d=[];m<i.length;m++)s=i[m],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},r={app:0},a=[];function s(t){return i.p+"js/"+({about:"about"}[t]||t)+"."+{about:"e39f15a9"}[t]+".js"}function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=r[t]=[e,o]}));e.push(n[2]=o);var a,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=s(t);var c=new Error;a=function(e){l.onerror=l.onload=null,clearTimeout(m);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",c.name="ChunkLoadError",c.type=o,c.request=a,n[1](c)}r[t]=void 0}};var m=setTimeout((function(){a({type:"timeout",target:l})}),12e4);l.onerror=l.onload=a,document.head.appendChild(l)}return Promise.all(e)},i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var m=0;m<l.length;m++)e(l[m]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("64a9"),r=n.n(o);r.a},1:function(t,e){},"12cf":function(t,e,n){},"22de":function(t,e,n){"use strict";var o=n("25be"),r=n.n(o);r.a},"23e2":function(t,e,n){},"25be":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),r=n("2f62");o["a"].use(r["a"]);var a=new r["a"].Store({state:{gamerName:"",isOwner:!1,isStart:!0,roomId:-1,roomParams:{month:3,money:1e5},connections:[],messages:[]},getters:{},mutations:{setName:function(t,e){t.gamerName=e},setOwner:function(t){t.isOwner=!0},setRoomParams:function(t,e){var n=e.month;t.roomParams={month:n}},SOCKET_setRoomNumber:function(t,e){t.roomId=e},SOCKET_addMessage:function(t,e){t.messages.push(e);var n=document.querySelector("#messageField");null!==n&&(n.scrollTop=n.scrollHeight)},SOCKET_setStartGame:function(t){console.log("Старт игры!"),t.isStart=!1}},actions:{}}),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[t._v("Вход")]),t._v("|\n    "),n("router-link",{attrs:{to:"/choose"}},[t._v("Создать игру")]),t._v("|\n    "),n("router-link",{attrs:{to:"/main"}},[t._v("Главный экран")]),t._v("|\n    "),n("router-link",{attrs:{to:"/about"}},[t._v("Об игре")])],1),n("div",{attrs:{id:"view"}},[n("transition",{attrs:{name:"slide",mode:"out-in",appear:""}},[n("router-view")],1)],1)])},i=[],l=(n("8055"),{data:function(){return{user:"",message:"",messages:[]}},sockets:{connect:function(t){console.log("Socket connected")}},computed:{},methods:{}}),c=l,m=(n("034f"),n("2877")),u=Object(m["a"])(c,s,i,!1,null,null,null),d=u.exports,f=n("8c4f"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("entrance",{attrs:{msg:"213"}})],1)},v=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card container col-4 mt-5 p-4"},[n("h1",{staticClass:"mb-4"},[t._v("Войдите в игру")]),n("form",{attrs:{action:""},on:{submit:function(t){t.preventDefault()}}},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"name"}},[t._v("Ваше имя")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],staticClass:"form-control form-control-lg",class:{"is-invalid":t.errorClass},attrs:{type:"text",name:"name",id:"name",placeholder:"Имя"},domProps:{value:t.name},on:{click:function(e){return t.clckForm()},input:function(e){e.target.composing||(t.name=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.errorClass?n("div",{staticClass:"invalid-feedback"},[t._v("Обязательно введите имя!")]):t._e(),n("small",{staticClass:"form-text text-muted"},[t._v("Имя необходимо, чтобы другие игроки могли идентифицировать в чате и игре")])]),n("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{disabled:t.disabled},on:{click:function(e){return t.changePop()}}},[t._v("Войти")])])])},h=[],b=(n("7f7f"),{name:"Entrance",props:{msg:String},data:function(){return{formClicked:!1,name:"",wasClicked:!1}},mounted:function(){var t=this;this.name=this.$store.state.gamerName,this.wasClicked&&(this.formClicked=!0),setInterval((function(){""!=t.name&&(t.formClicked=!0)}),100)},computed:{gamerName:function(){return this.$store.state.gamerName},errorClass:function(){var t=""==this.name&&this.formClicked;return t},disabled:function(){return!this.formClicked||""==this.name&&this.formClicked}},methods:{changePop:function(){console.log(this.name),this.$socket.emit("setName",this.name),this.$store.commit("setName",this.name),this.$router.push("choose")},clckForm:function(){this.formClicked=!0,this.clickForm=!0}}}),_=b,y=Object(m["a"])(_,p,h,!1,null,"02e65afc",null),k=y.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card container col-5 col-md-4 col-sm-6 col-xs-12 mt-5 p-4"},[n("h1",{staticClass:"mb-1"},[t._v("Привет, "+t._s(t.gamerName)+"!")]),n("router-link",{attrs:{to:"/"}},[t._v("Сменить имя")]),n("p",[t._v("Выбери, как ты начнёшь игру")]),n("div",{staticClass:"btn-group btn-group-toggle mb-3"},[n("label",{staticClass:"btn btn-lg",class:{"btn-outline-info":"join"!=this.toggle,"btn-info":"join"==this.toggle}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.toggle,expression:"toggle"}],attrs:{type:"radio",value:"join",name:"toggle",id:"toggle1",autocomplete:"off"},domProps:{checked:t._q(t.toggle,"join")},on:{change:function(e){t.toggle="join"}}}),t._v(" Присоединиться к комнате\n    ")]),n("label",{staticClass:"btn btn-lg",class:{"btn-outline-info":"create"!=this.toggle,"btn-info":"create"==this.toggle}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.toggle,expression:"toggle"}],attrs:{type:"radio",value:"create",name:"toggle",id:"toggle2",autocomplete:"off"},domProps:{checked:t._q(t.toggle,"create")},on:{change:function(e){t.toggle="create"}}}),t._v("Создать комнату\n    ")])]),n("transition",{attrs:{name:"slideUp",mode:"out-in",appear:""}},["join"==t.toggle?n("div",{},[n("label",{attrs:{for:"name"}},[t._v("Номер комнаты")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.roomIdJoin,expression:"roomIdJoin",modifiers:{number:!0}}],staticClass:"form-control form-control-lg mb-3",attrs:{type:"number",min:"0",name:"roomIdJoin",id:"roomIdJoin",placeholder:"Введите номер комнаты"},domProps:{value:t.roomIdJoin},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.joinGame()},input:function(e){e.target.composing||(t.roomIdJoin=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),n("button",{staticClass:"btn btn-lg btn-danger btn-block",on:{click:function(e){return t.joinGame()}}},[t._v("Присоединиться")])]):t._e(),"create"==t.toggle?n("div",{},[n("label",{attrs:{for:"name"}},[t._v("Количество месяцев")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.roomParams.month,expression:"roomParams.month",modifiers:{number:!0}}],staticClass:"form-control form-control-lg mb-3",attrs:{type:"number",min:"0",name:"month",id:"month",placeholder:"3"},domProps:{value:t.roomParams.month},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createGame()},input:function(e){e.target.composing||t.$set(t.roomParams,"month",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),n("label",{attrs:{for:"name"}},[t._v("Начальный капитал")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.roomParams.money,expression:"roomParams.money",modifiers:{number:!0}}],staticClass:"form-control form-control-lg mb-3",attrs:{type:"number",min:"0",name:"money",id:"money",placeholder:"100000"},domProps:{value:t.roomParams.money},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createGame()},input:function(e){e.target.composing||t.$set(t.roomParams,"money",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),n("button",{staticClass:"btn btn-lg btn-danger btn-block",on:{click:function(e){return t.createGame()}}},[t._v("Создать")])]):t._e()])],1)},x=[],w={name:"Choose",data:function(){return{toggle:"join",roomIdJoin:"",roomParams:{month:3,money:1e5}}},computed:{gamerName:function(){return this.$store.state.gamerName}},methods:{createGame:function(){this.$socket.emit("createRoom",""),this.$router.push("main"),this.$store.state.isOwner=!0,this.$store.state.roomParams=this.roomParams},joinGame:function(){this.$socket.emit("setRoom",this.roomIdJoin),console.log("//"+this.roomIdJoin),this.$router.push("main")}}},$=w,O=Object(m["a"])($,C,x,!1,null,null,null),P=O.exports,S={name:"Home",components:{Entrance:k,Choose:P}},E=S,j=Object(m["a"])(E,g,v,!1,null,null,null),N=j.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"splitScr"}},[n("div",{staticClass:"main-side"},[n("div",{staticClass:"pg-header"},[n("h1",{staticClass:"ml-1 mb-0"},[t._v("Room #"+t._s(t.roomNumber))]),n("router-link",{staticClass:"mb-2 ml-1",attrs:{to:"choose"}},[t._v("Выйти из комнаты")])],1),n("PlayGround")],1),n("Chat")],1)},G=[],M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sideBox"},[n("h2",{attrs:{id:"chat"}},[t._v("Chat")]),n("div",{staticClass:"messageField",attrs:{id:"messageField"}},[n("div",{staticClass:"messageBox"},t._l(t.messages,(function(e,o){return n("div",{key:o,staticClass:"message"},[n("div",{staticClass:"avatar"}),n("div",{staticClass:"mess-block"},[n("div",{staticClass:"nickname",class:{adminMess:"Admin"==e.name}},[t._v(t._s(e.name))]),n("div",{staticClass:"messText"},[t._v(t._s(e.text))])])])})),0)]),n("SendBox")],1)},I=[],J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"inputBox",attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.sendMessage(e)}}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{name:"",rows:"2",placeholder:"Введите ваше сообщение..."},domProps:{value:t.message},on:{keydown:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage(e)}],input:function(e){e.target.composing||(t.message=e.target.value)}}}),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.sendMessage}},[t._v("Отправить")])])},R=[],D={name:"SendBox",data:function(){return{message:""}},watch:{message:function(t){t?socket.emit("typing",this.username):socket.emit("stopTyping")}},methods:{sendMessage:function(){""!==this.message&&(""===this.$store.state.gamerName&&(this.$store.state.gamerName="Anonim"),this.$socket.emit("newMessage",this.message),this.$store.commit("SOCKET_addMessage",{name:this.$store.state.gamerName,text:this.message}),this.message="")}}},F=D,B=(n("9d26"),Object(m["a"])(F,J,R,!1,null,"16a8dfeb",null)),K=B.exports,q={name:"Chat",data:function(){return{}},components:{SendBox:K},computed:{messages:function(){return setTimeout((function(){var t=document.querySelector("#messageField");null!==t&&(t.scrollTop=t.scrollHeight)}),10),this.$store.state.messages}},methods:{}},H=q,U=(n("f196"),Object(m["a"])(H,M,I,!1,null,null,null)),A=U.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"playground"}},[n("div",{attrs:{id:"play-field"}},[n("div",{staticClass:"play-information",class:{dragstart:t.dragstart,dragover:t.dragover},on:{dragenter:function(e){return e.preventDefault(),t.dragov(e)},dragover:function(t){t.preventDefault()},drop:function(e){return e.preventDefault(),t.altdrop(e)},dragleave:t.dragleave}},[t.isOwner&t.isStart?n("div",{staticClass:"owner-start-game d-flex align-content-between flex-wrap mt-3"},[n("div",{staticClass:"container text-centre"},[n("h1",[t._v("Начать игру")]),t._m(0),n("div",{staticClass:"btn btn-primary btn-lg btn-block mt-3",on:{click:t.startGame}},[t._v("Начать")])])]):t._e(),!t.isOwner&t.isStart?n("div",{staticClass:"owner-start-game d-flex align-content-between flex-wrap mt-3"},[t._m(1)]):t._e()])]),n("div",{staticStyle:{transition:"all 5s"},attrs:{id:"card-field"}},[n("div",{staticStyle:{transition:"all 5s"},attrs:{id:"card-wrap"}},[n("transition-group",{attrs:{mode:"out-in",name:"cardwrap",id:"card-wrap",tag:"div",type:"transition"},on:{"before-enter":t.beforeEnter,enter:t.enter,leave:t.leave}},t._l(t.cards,(function(e,o){return n("div",{key:o,staticClass:"card-box",attrs:{draggable:""},on:{dragstart:function(e){return e.target!==e.currentTarget?null:t.altdragstart(e)},dragend:t.altdragend}},[n("h6",{staticClass:"card-title text-center"},[t._v(t._s(e.title))]),n("div",{staticClass:"card-image"}),n("small",{staticClass:"card-text text-center"},[t._v(t._s(e.text))])])})),0)],1)]),n("div",{attrs:{id:"enemy-field"}})])},z=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n            Если все игроки подключились к комнате, вы можете запустить\n            "),n("mark",[t._v("первый раунд")]),t._v(" в созданной вами комнате.\n          ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container text-centre"},[n("h1",[t._v("Ожидайте начала игры")]),n("p",[t._v("\n            Когда все игроки подключатся к комнате, создатель комнаты запуститт\n            "),n("mark",[t._v("первый раунд")]),t._v(" в созданной комнате.\n          ")])])}],Q=(n("3022"),{name:"PlayGround",data:function(){return{dragstart:!1,dragover:!1,dragnode:void 0,cards:[{title:"Название карты 1!",text:"Описание карточки, описание карточки"},{title:"Название карты 2!",text:"Описание карточки, описание карточки"},{title:"Название карты 3!",text:"Описание карточки, описание карточки"},{title:"Название карты 4!",text:"Описание карточки, описание карточки"},{title:"Название карты 5!",text:"Описание карточки, описание карточки"}]}},computed:{isOwner:function(){return this.$store.state.isOwner},isStart:function(){return this.$store.state.isStart}},methods:{startGame:function(){this.$socket.emit("startGame",this.$store.state.roomParams),this.$store.state.isOwner=!1,this.$store.state.isStart=!1},beforeEnter:function(t){console.log("befenterhook")},enter:function(t){console.log("enterhook")},leave:function(t){t.style.opacity=0,t.style.height=0,console.log("leavehook")},altdrop:function(t){t.preventDefault(),console.log("drop"),console.log(),this.dragovered=!1,this.dragstart=!1,"undefined"!=typeof this.dragnode&&this.dragnode.parentNode.removeChild(this.dragnode)},altdragstart:function(t){t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="move",t.dataTransfer.setData("text/plain",null),t.target.style.opacity=.5,t.target.style.transform="scale(0.8)",this.dragstart=!0,this.dragnode=t.target},altdragend:function(t){t.target.style.opacity="",t.target.style.transform="",this.dragover=!1,this.dragstart=!1},dragov:function(t){console.log("over"),t.dataTransfer.dropEffect="move",this.dragover=!0},dragleave:function(t){console.log("leave"),this.dragover=!1}}}),V=Q,W=(n("8c4c"),Object(m["a"])(V,L,z,!1,null,null,null)),X=W.exports;n("f9e3");var Y={name:"Main",components:{Chat:A,PlayGround:X},methods:{leaveRoom:function(){console.log("Ушёл из комнаты!"),this.$socket.emit("leaveRoom"),this.$store.state.messages=[],this.$store.state.isStart=!1,this.$store.state.isOwner=!1}},beforeRouteLeave:function(t,e,n){this.leaveRoom(),n()},computed:{roomNumber:function(){return this.$store.state.roomId},connections:function(){return this.$store.state.connections}}},Z=Y,tt=(n("22de"),Object(m["a"])(Z,T,G,!1,null,null,null)),et=tt.exports;o["a"].use(f["a"]);var nt=new f["a"]({mode:"history",base:"/",routes:[{path:"/",name:"Home",component:N},{path:"/choose",name:"Choose",component:P},{path:"/main",name:"Main",component:et},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/*",redirect:{name:"Home"}}]}),ot=n("5132"),rt=n.n(ot);o["a"].config.productionTip=!1,o["a"].use(new rt.a({debug:!0,connection:"http://localhost:3001",vuex:{store:a,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),new o["a"]({router:nt,store:a,render:function(t){return t(d)}}).$mount("#app")},"64a9":function(t,e,n){},"89ac":function(t,e,n){},"8c4c":function(t,e,n){"use strict";var o=n("89ac"),r=n.n(o);r.a},"9d26":function(t,e,n){"use strict";var o=n("12cf"),r=n.n(o);r.a},f196:function(t,e,n){"use strict";var o=n("23e2"),r=n.n(o);r.a}});
//# sourceMappingURL=app.115f4f73.js.map